// Configuration file for nf-core/methylseq pipeline

params {
    // Input/Output
    input = 'samplesheet.csv'
    outdir = 'results'

    // Genome reference - using local files
    genome = null  // Disable automatic genome download

    // Analysis parameters
    aligner = 'bwameth'  // Using BWA-meth for bisulfite alignment

    // Resource limits
    max_cpus = 8
    max_memory = '32.GB'
    max_time = '240.h'

    // Skip certain steps if needed
    skip_fastqc = false
    skip_multiqc = false

    // Enable trace and timeline
    trace_enabled = true
    timeline_enabled = true
    report_enabled = true
}

// Process configuration
process {
    // Default resource allocation
    cpus = 2
    memory = '4.GB'
    time = '4.h'

    // BWA-meth specific process configurations
    withName: 'NFCORE_METHYLSEQ:METHYLSEQ:FASTQ_ALIGN_DEDUP_BWAMETH:BWAMETH_ALIGN' {
        cpus = 4
        memory = '8.GB'
        time = '8.h'
    }

    withName: 'NFCORE_METHYLSEQ:METHYLSEQ:FASTQ_ALIGN_DEDUP_BWAMETH:METHYLDACKEL_EXTRACT' {
        cpus = 2
        memory = '6.GB'
        time = '4.h'
    }

    withName: 'NFCORE_METHYLSEQ:METHYLSEQ:TRIMGALORE' {
        cpus = 4
        memory = '8.GB'
        time = '4.h'
    }
}

// Executor configuration
executor {
    name = 'local'
    cpus = 8
    memory = '32.GB'
}

// Enable conda for automatic environment management
docker.enabled = false
singularity.enabled = false
conda.enabled = true
conda.useMamba = true  // Use mamba for faster environment creation

// Work directory
workDir = './work'

// Cleanup work directory after successful completion
cleanup = false
